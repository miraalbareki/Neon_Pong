<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Neon Pong - The Ultimate Retro-Futuristic Arcade</title>
    <link rel="stylesheet" href="/src/styles/style.css">
    <link rel="stylesheet" href="/src/styles/auth-forms.css">
    <link rel="stylesheet" href="/src/styles/game-customization.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
    </style>
  </head>
  <body>
    <div class="background-animation-container">
        <div id="starfield"></div>

        <div class="grid-overlay"></div> <div class="glow-effect"></div>
        <div class="surface"></div>
        <div class="ball"></div>
        <div class="ball-shadow"></div>

        <div class="ambient-particles">
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
        </div>
    </div>
    <div id="app">
        <main class="page">
            <div id="home" class="hero-section content-section">
                <h1 class="hero-title">NEON PONG</h1>
                <h2 class="hero-subtitle">THE ULTIMATE RETRO-FUTURISTIC ARCADE EXPERIENCE.</h2>
                <p class="hero-description">Challenge your friends in a fast-paced game of skill and reflexes.</p>
                <div class="hero-cta">
                    <button class="primary-button register-cta-button"><i class="fas fa-user-plus"></i> Register Now</button>
                </div>
            </div>
            <div id="register" class="content-section">
                <div class="form-container">
                    <!-- Premium Toggle Switch -->
                    <div class="premium-toggle-container">
                        <div class="premium-toggle">
                            <input type="checkbox" id="authToggle" class="toggle-checkbox">
                            <label for="authToggle" class="toggle-label">
                                <span class="toggle-option">SIGN IN</span>
                                <span class="toggle-switch"></span>
                                <span class="toggle-option">SIGN UP</span>
                            </label>
                        </div>
                    </div>
                    <form id="loginForm" class="auth-form">
                        <h3 class="form-title">Welcome Back</h3>
                        <p class="form-subtitle">Sign in to continue your journey</p>
                        
                        <div class="form-group">
                            <label for="loginEmail" class="form-label">Email</label>
                            <div class="input-wrapper">
                                <input type="email" id="loginEmail" class="form-input" placeholder="Enter your email" required>
                                <i class="fas fa-envelope input-icon"></i>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <div class="form-label-container">
                                <label for="loginPassword" class="form-label">Password</label>
                                <a href="#forgot-password" class="forgot-password">Forgot password?</a>
                            </div>
                            <div class="input-wrapper">
                                <input type="password" id="loginPassword" class="form-input" placeholder="Enter your password" required>
                                <i class="fas fa-lock input-icon"></i>
                            </div>
                        </div>
                        
                        <div class="form-options">
                            <label class="checkbox-container">
                                <input type="checkbox" id="rememberMe">
                                <span class="checkmark"></span>
                                <span>Remember me</span>
                            </label>
                        </div>
                        
                        <div class="auth-buttons">
                            <button type="submit" class="primary-button">
                                <i class="fas fa-sign-in-alt"></i> Sign In
                            </button>
                        </div>
                        
                        <div class="social-login">
                            <p>Or sign in with</p>
                            <div class="social-buttons">
                                <button type="button" class="social-button google">
                                    <i class="fab fa-google"></i>
                                </button>
                                <button type="button" class="social-button github">
                                    <i class="fab fa-github"></i>
                                </button>
                    </form>
                    <form id="registerForm" class="auth-form" style="display: none;">
                        <h3 class="form-title">Create Account</h3>
                        <p class="form-subtitle">Join the Neon Pong community</p>
                        <div class="form-group">
                            <label for="registerEmail" class="form-label">Email</label>
                            <div class="input-wrapper">
                                <input type="email" id="registerEmail" class="form-input" placeholder="Enter your email" required>
                                <i class="fas fa-envelope input-icon"></i>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="registerUsername" class="form-label">Username</label>
                            <div class="input-wrapper">
                                <input type="text" id="registerUsername" class="form-input" placeholder="Choose a username" required>
                                <i class="fas fa-user input-icon"></i>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="registerPassword" class="form-label">Password</label>
                            <div class="input-wrapper">
                                <input type="password" id="registerPassword" class="form-input" placeholder="Enter your password" required>
                                <i class="fas fa-lock input-icon"></i>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="confirmPassword" class="form-label">Confirm Password</label>
                            <div class="input-wrapper">
                                <input type="password" id="confirmPassword" class="form-input" placeholder="Confirm your password" required>
                                <i class="fas fa-lock input-icon"></i>
                            </div>
                        </div>
                        
                        <div class="auth-buttons">
                            <button type="submit" class="primary-button">
                                <i class="fas fa-user-plus"></i> Create Account
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </main>

        <footer>
{{ ... }}
            <p>Made with <i class="fas fa-heart" style="color: var(--secondary-color);"></i> by Four Innovative Minds.</p>
        </footer>

        <div id="loadingOverlay" class="loading-overlay hidden">
            <div class="spinner"></div>
            <p class="loading-text">Loading...</p>
        </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
    <script>
        const ball = document.querySelector('.ball');
        // Renamed 'container' to 'backgroundContainer' to avoid conflict with existing classes if any
        const backgroundContainer = document.querySelector('.background-animation-container');

        function createTrail() {
            // Ensure elements exist before trying to get their positions
            if (!ball || !backgroundContainer) {
                // If elements aren't found (e.g., due to loading order), stop trying to create trails.
                // This console warning helps debugging if the script runs before elements are parsed.
                console.warn("Ball or background container not found for trail effect. Stopping trail creation.");
                if (typeof trailInterval !== 'undefined') clearInterval(trailInterval); // Stop the interval if elements are missing
                return;
            }

            const trail = document.createElement('div');
            trail.className = 'trail';

            const ballRect = ball.getBoundingClientRect();
            const containerRect = backgroundContainer.getBoundingClientRect();

            // Calculate position relative to the background-animation-container
            trail.style.left = (ballRect.left - containerRect.left + (ballRect.width / 2)) + 'px'; // Center trail horizontally
            trail.style.bottom = (window.innerHeight - ballRect.bottom - containerRect.top + (ballRect.height / 2)) + 'px'; // Center trail vertically, adjusted for container top

            backgroundContainer.appendChild(trail);

            // Remove trail after animation
            setTimeout(() => {
                if (trail.parentNode) {
                    trail.parentNode.removeChild(trail);
                }
            }, 800);
        }

        // Create trail particles periodically, only if elements are present
        let trailInterval;
        if (ball && backgroundContainer) {
            trailInterval = setInterval(createTrail, 100);
        }

        // Add subtle camera shake effect to the main content
        let shakeOffset = 0;
        const appContainer = document.getElementById('app');

        function cameraShake() {
            // Only apply shake if the #app container exists
            if (appContainer) {
                shakeOffset += 0.05;
                const shake = Math.sin(shakeOffset) * 0.5; // Reduced shake for subtlety
                appContainer.style.transform = `translateY(${shake}px)`;
            }
            requestAnimationFrame(cameraShake);
        }
        // Start camera shake only if appContainer exists
        if (appContainer) {
          cameraShake();
        }


        // Dynamic glow intensity based on ball position
        const glowEffect = document.querySelector('.glow-effect');
        function updateGlow() {
            // Only update glow if the element exists
            if (glowEffect) {
                const time = Date.now() * 0.001;
                const intensity = 0.5 + Math.sin(time * 2) * 0.3;
                glowEffect.style.opacity = intensity.toFixed(2);
            }
            requestAnimationFrame(updateGlow);
        }
        if (glowEffect) {
           updateGlow(); // Start glow update
        }
        document.addEventListener('DOMContentLoaded', () => {
            const starfield = document.getElementById('starfield');

            // 1. Create Stars
            function createStars() {
                if (!starfield) return;
                starfield.innerHTML = ''; // Clear existing stars if any
                const numStars = 350; // Increased number of stars for more frequency
                for (let i = 0; i < numStars; i++) {
                    let star = document.createElement('div');
                    star.className = 'star';
                    star.style.width = `${Math.random() * 2 + 1}px`; // Star size 1px to 3px
                    star.style.height = star.style.width;
                    star.style.left = `${Math.random() * 100}%`;
                    star.style.top = `${Math.random() * 100}%`; // Start at random vertical position
                    // Ensure animation moves them "up" the screen, so they appear from bottom or mid and move towards top
                    star.style.animationDuration = `${Math.random() * 8 + 4}s`; // Faster animation (4s to 12s)
                    star.style.animationDelay = `${Math.random() * 5}s`; // Shorter delay (0s to 5s) for more frequency
                    star.style.setProperty('--star-translate-x-end', `${(Math.random() - 0.5) * 30}vw`); // Random slight horizontal drift
                    starfield.appendChild(star);
                }
            }
            if (starfield) 
            {
                createStars();
            }
        });
    </script>
    </body>
</html>